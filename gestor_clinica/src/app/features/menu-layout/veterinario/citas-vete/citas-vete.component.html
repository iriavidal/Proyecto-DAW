<section class="container">
  <h2>Citas del día</h2>
  <section class="citas">
    <ng-container *ngIf="citasDelDia.length > 0; else sinCitasDelDia">
      <ng-container *ngFor="let cita of citasDelDia">
        <article class="card-cita">
          <h3>{{ cita.tipo_cita }}</h3>
          <p>{{ cita.fecha_y_hora | formatDateTime }}</p>
          <div class="opciones">
            <span class="editar" (click)="perfilMascota(cita.id_cita)">
              <svg
                width="22"
                height="16"
                viewBox="0 0 22 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17 0C15.29 0 14.25 0.33 13.65 0.61C12.88 0.23 12 0 11 0C10 0 9.12 0.23 8.35 0.61C7.75 0.33 6.71 0 5 0C2 0 0 8 0 10C0 10.83 1.32 11.59 3.14 11.9C3.78 14.14 6.8 15.85 10.5 16V11.72C9.91 11.35 9 10.68 9 10C9 9 11 9 11 9C11 9 13 9 13 10C13 10.68 12.09 11.35 11.5 11.72V16C15.2 15.85 18.22 14.14 18.86 11.9C20.68 11.59 22 10.83 22 10C22 8 20 0 17 0ZM3.15 9.87C2.65 9.75 2.26 9.61 2 9.5C2.25 6.73 4.2 2.4 5.05 2C5.59 2 6 2.06 6.37 2.11C4.27 4.42 3.44 8.04 3.15 9.87ZM8 8C7.73478 8 7.48043 7.89464 7.29289 7.70711C7.10536 7.51957 7 7.26522 7 7C7 6.46 7.45 6 8 6C8.26522 6 8.51957 6.10536 8.70711 6.29289C8.89464 6.48043 9 6.73478 9 7C9 7.56 8.55 8 8 8ZM14 8C13.7348 8 13.4804 7.89464 13.2929 7.70711C13.1054 7.51957 13 7.26522 13 7C13 6.46 13.45 6 14 6C14.2652 6 14.5196 6.10536 14.7071 6.29289C14.8946 6.48043 15 6.73478 15 7C15 7.56 14.55 8 14 8ZM18.85 9.87C18.56 8.04 17.73 4.42 15.63 2.11C16 2.06 16.41 2 16.95 2C17.8 2.4 19.75 6.73 20 9.5C19.75 9.61 19.36 9.75 18.85 9.87Z"
                  fill="#205047"
                />
              </svg>
            </span>
            <span
              class="eliminar"
              (click)="crearHistorial(cita.id_mascota, cita.id_cita)"
            >
              <svg
                width="20"
                height="19"
                viewBox="0 0 20 19"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.13 9L16.39 7.74C16.83 7.3 17.39 7.06 18 7V6L12 0H2C0.89 0 0 0.89 0 2V16C0 17.1 0.89 18 2 18H8V16.13L8.13 16H2V2H9V9H15.13ZM11 1.5L16.5 7H11V1.5ZM16.13 10.83L18.17 12.87L12.04 19H10V16.96L16.13 10.83ZM19.85 11.19L18.87 12.17L16.83 10.13L17.81 9.15C18 8.95 18.33 8.95 18.53 9.15L19.85 10.47C20.05 10.67 20.05 11 19.85 11.19Z"
                  fill="#205047"
                />
              </svg>
            </span>
          </div>
        </article>
      </ng-container>
    </ng-container>
    <ng-template #sinCitasDelDia>
      <p>No tienes citas hoy...</p>
    </ng-template>
  </section>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title><h3>Citas futuras</h3></mat-panel-title>
    </mat-expansion-panel-header>

    <section class="filtro">
      <mat-form-field>
        <mat-label>Filtrar por día</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          [(ngModel)]="fechaSeleccionada"
          (ngModelChange)="actualizarFiltro()"
        />
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </section>

    <section class="citas">
      <ng-container *ngIf="citasFuturas.length > 0; else sinCitasFuturas">
        <ng-container *ngFor="let cita of citasFiltradas">
          <article class="card-cita">
            <h3>{{ cita.tipo_cita }}</h3>
            <p>{{ cita.fecha_y_hora | formatDateTime }}</p>
            <div class="opciones">
              <span class="editar" (click)="perfilMascota(cita.id_cita)">
                <svg
                  width="22"
                  height="16"
                  viewBox="0 0 22 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M17 0C15.29 0 14.25 0.33 13.65 0.61C12.88 0.23 12 0 11 0C10 0 9.12 0.23 8.35 0.61C7.75 0.33 6.71 0 5 0C2 0 0 8 0 10C0 10.83 1.32 11.59 3.14 11.9C3.78 14.14 6.8 15.85 10.5 16V11.72C9.91 11.35 9 10.68 9 10C9 9 11 9 11 9C11 9 13 9 13 10C13 10.68 12.09 11.35 11.5 11.72V16C15.2 15.85 18.22 14.14 18.86 11.9C20.68 11.59 22 10.83 22 10C22 8 20 0 17 0ZM3.15 9.87C2.65 9.75 2.26 9.61 2 9.5C2.25 6.73 4.2 2.4 5.05 2C5.59 2 6 2.06 6.37 2.11C4.27 4.42 3.44 8.04 3.15 9.87ZM8 8C7.73478 8 7.48043 7.89464 7.29289 7.70711C7.10536 7.51957 7 7.26522 7 7C7 6.46 7.45 6 8 6C8.26522 6 8.51957 6.10536 8.70711 6.29289C8.89464 6.48043 9 6.73478 9 7C9 7.56 8.55 8 8 8ZM14 8C13.7348 8 13.4804 7.89464 13.2929 7.70711C13.1054 7.51957 13 7.26522 13 7C13 6.46 13.45 6 14 6C14.2652 6 14.5196 6.10536 14.7071 6.29289C14.8946 6.48043 15 6.73478 15 7C15 7.56 14.55 8 14 8ZM18.85 9.87C18.56 8.04 17.73 4.42 15.63 2.11C16 2.06 16.41 2 16.95 2C17.8 2.4 19.75 6.73 20 9.5C19.75 9.61 19.36 9.75 18.85 9.87Z"
                    fill="#205047"
                  />
                </svg>
              </span>
            </div>
          </article>
        </ng-container>
      </ng-container>
      <ng-template #sinCitasFuturas>
        <p>No tienes citas futuras...</p>
      </ng-template>
    </section>
  </mat-expansion-panel>
</section>
