<section class="container">
  <!-- <article class="logo">
    <img
      src="../../../../assets/img/logo_apaisado.png"
      alt="Logo Del Campo"
      class="logo-img"
    />
  </article> -->

  <article class="form">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- Campo de email -->
      <div class="form-field">
        <label for="email">Email</label>
        <div class="wrapper">
          <input
            id="email"
            type="email"
            placeholder="Introduce tu email"
            formControlName="email"
            [ngClass]="{ invalid: email?.invalid && email?.touched }"
          />
          <span class="icono-input"><mat-icon>email</mat-icon></span>
        </div>
        <span
          class="error"
          *ngIf="email?.hasError('required') && email?.touched"
        >
          El email es obligatorio
        </span>
        <span
          class="error"
          *ngIf="email?.hasError('email') && !email?.hasError('required')"
        >
          Introduce un email válido
        </span>
      </div>

      <!-- Campo de contraseña -->
      <div class="form-field">
        <label for="password">Contraseña</label>
        <div class="wrapper">
          <input
            id="password"
            [type]="hide() ? 'password' : 'text'"
            placeholder="Introduce tu contraseña"
            formControlName="password"
            [ngClass]="{ invalid: password?.invalid && password?.touched }"
          />
          <button
            type="button"
            class="toggle-visibility"
            (click)="clickEvent($event)"
            [attr.aria-label]="'Ocultar contraseña'"
            [attr.aria-pressed]="hide()"
          >
            <mat-icon class="icono-input">{{
              hide() ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
        </div>
        <span
          class="error"
          *ngIf="password?.hasError('required') && password?.touched"
        >
          La contraseña es obligatoria
        </span>
      </div>

      <!-- Campo de repetir contraseña -->
      <div class="form-field">
        <label for="password2">Repite la contraseña</label>
        <div class="wrapper">
          <input
            id="password2"
            [type]="hide() ? 'password' : 'text'"
            placeholder="Repite tu contraseña"
            formControlName="password2"
            [ngClass]="{
              invalid:
                (password2?.invalid && password2?.touched) ||
                password2?.hasError('PasswordNoMatch')
            }"
          />
          <button
            type="button"
            class="toggle-visibility"
            (click)="clickEvent($event)"
            [attr.aria-label]="'Ocultar contraseña'"
            [attr.aria-pressed]="hide()"
          >
            <mat-icon class="icono-input">{{
              hide() ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
        </div>

        <!-- Error de contraseña no coincide -->
        <span
          *ngIf="loginForm.hasError('PasswordNoMatch') && password2?.touched"
          class="error"
        >
          Las contraseñas no coinciden
        </span>
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="loginError" class="error-message">
        {{ loginError }}
      </div>

      <!-- Botón de inicio de sesión -->
      <button
        type="submit"
        [disabled]="loginForm.invalid || loading"
        class="submit-button"
      >
        <ng-container *ngIf="loading"> Cargando... </ng-container>
        <ng-container *ngIf="!loading">Registrarse</ng-container>
      </button>

      <!-- Enlace para registro -->
      <div class="internal-form-footer-text">
        <a [routerLink]="'/auth/login'" class="login-link">Iniciar sesión ></a>
      </div>
    </form>
  </article>
</section>
